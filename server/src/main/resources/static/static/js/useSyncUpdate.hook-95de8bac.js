var m=(t,o,a)=>new Promise((r,c)=>{var s=e=>{try{d(a.next(e))}catch(u){c(u)}},i=e=>{try{d(a.throw(e))}catch(u){c(u)}},d=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,i);d((a=a.apply(t,o)).next())});import{aQ as n,A as p,H as S,M as l,aD as f}from"./index-9e787fa5.js";import{u as g,f as w}from"./chartEditStore-56d3c83a.js";import{u as H}from"./useSync.hook-87506693.js";import{g as h}from"./plugin-e1dac962.js";const{updateComponent:y,dataSyncUpdate:v}=H(),E=g(),L=()=>{h({message:"是否覆盖源视图内容，此操作不可撤回?",isMaskClosable:!0,transformOrigin:"center",onPositiveCallback:()=>m(void 0,null,function*(){window.$message.success("正在同步编辑器..."),v&&(yield v()),dispatchEvent(new CustomEvent(n.CHART,{detail:E.getStorageInfo()}))})})},C=()=>{dispatchEvent(new CustomEvent(n.CHART_TO_PREVIEW,{detail:E.getStorageInfo()}))},O=()=>{const t=s=>{window.$message.success("正在进行更新..."),y(s.detail,!0)},o=()=>{E.setEditCanvas(w.IS_CODE_EDIT,!1)},a=()=>{addEventListener("blur",C),addEventListener(n.JSON,t),addEventListener(n.CLOSE,f(o,1e3))},r=()=>{removeEventListener("blur",C),removeEventListener(n.JSON,t)};return(s,i)=>{i==l.CHART_HOME_NAME&&r(),s==l.CHART_HOME_NAME&&a()}},M=()=>{const t=p();S(()=>t.name,O(),{immediate:!0})};export{L as s,M as u};
