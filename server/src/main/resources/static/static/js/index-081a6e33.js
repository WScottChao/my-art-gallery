var xe=Object.defineProperty,be=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var ie=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var de=(r,_,v)=>_ in r?xe(r,_,{enumerable:!0,configurable:!0,writable:!0,value:v}):r[_]=v,ee=(r,_)=>{for(var v in _||(_={}))we.call(_,v)&&de(r,v,_[v]);if(ie)for(var v of ie(_))Ie.call(_,v)&&de(r,v,_[v]);return r},oe=(r,_)=>be(r,ye(_));import{d as _e,bn as Ee,r as te,a as le,H as pe,at as D,G as ne,de as He,df as $e,dg as Te,j as n,k as p,c as k,e,w as o,n as y,b as i,F as P,l as B,ab as se,Q as Se,f as w,U as Oe,aF as J,a7 as ae,av as ze,au as R,dh as De,di as Re,p as ve,q as me,z as fe,J as ue,C as q,t as Ue}from"./index-9e787fa5.js";import{n as Ae}from"./noData-e5cefb25.js";import{g as L}from"./plugin-e1dac962.js";import{i as Ce}from"./icon-caec1666.js";import{u as Le,E as G}from"./chartEditStore-56d3c83a.js";import{l as Pe}from"./index-81fca23c.js";import"./index.vue_vue_type_script_setup_true_lang-1414f1f1.js";import"./index-567c51a3.js";const ce=r=>(ve("data-v-27e1642f"),r=r(),me(),r),Be={key:0,class:"create-color-setting"},Me={class:"color-list-box go-mt-3","x-gap":12,"y-gap":12,cols:4},je={class:"go-flex-items-center"},Fe=ce(()=>i("span",{class:"go-mr-4"},"添加",-1)),Ne={class:"expend-color-box"},Ve=["onClick"],qe=ce(()=>i("div",{class:"n-color-picker-checkboard"},null,-1)),Ge=["onClick"],Je=ce(()=>i("div",{class:"n-color-picker-checkboard"},null,-1)),Qe=_e({__name:"index",props:{selectColor:Object},emits:["updateColor"],setup(r,{emit:_}){Ee(l=>({"5ccb5b4e":d.color}));const v=r,T=_,{AddIcon:Q,TrashIcon:K}=Ce.ionicons5,W=Pe(()=>ze(()=>import("./index-a3cadaf0.js"),["./index-a3cadaf0.js","./index.esm.min-33db7d4b.js","./index-9e787fa5.js","..\\css\\index-28fc6980.css","./chartEditStore-56d3c83a.js","./plugin-e1dac962.js","./icon-caec1666.js"],import.meta.url)),s=te(),d=le({index:-1,color:""});pe(()=>{var l;return(l=v.selectColor)==null?void 0:l.id},()=>{var l;s.value=D(v.selectColor),d.index=0,d.color=(l=s.value)==null?void 0:l.color[0]},{immediate:!0,deep:!1});const S=ne(()=>C(d.color)),C=l=>{if(!l)return{default:[],fade:[]};const a=36,m=[],I=[],t=[];for(let c=0;c<a;c++)I.unshift(He(l,1/100*(c+1))),m.push($e(l,3.5/100*(c+1)));return m.forEach((c,g)=>{t.unshift(Te(c,1/100*(g+1)))}),{default:[...I.reverse().splice(0,parseInt(`${a/2}`)-9),...m.splice(0,parseInt(`${a/2}`))],fade:t.reverse().splice(0,27)}},u=l=>({backgroundColor:l}),h=(l,a)=>{d.color=l,d.index=a},x=(l,a)=>{l&&(d.color=l),a&&(d.index=a),R(()=>{T("updateColor",s.value)})},M=(l,a)=>{const m=a?De(l):Re(l);s.value&&(s.value.color[d.index]=m),R(()=>{T("updateColor",s.value)})},U=()=>{var a,m,I;const l=((m=s.value)==null?void 0:m.color[((a=s.value)==null?void 0:a.color.length)-1])||"#2c2c31";(I=s.value)==null||I.color.push(l),R(()=>{T("updateColor",s.value)})},j=l=>{var a,m;(a=s.value)==null||a.color.splice(l,1),l===d.index&&x((m=s.value)==null?void 0:m.color[l-1],l-1)},X=()=>{R(()=>{T("updateColor",s.value)})};return(l,a)=>{const m=n("n-input-group-label"),I=n("n-input"),t=n("n-input-group"),c=n("n-tag"),g=n("n-space"),E=n("n-color-picker"),F=n("n-icon"),A=n("n-tooltip"),O=n("n-button"),Y=n("n-scrollbar"),z=n("n-card"),N=n("n-text"),V=n("n-divider");return s.value?(p(),k("div",Be,[e(z,{bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(g,{justify:"space-between"},{default:o(()=>[e(t,null,{default:o(()=>[e(m,null,{default:o(()=>[y("名称:")]),_:1}),e(I,{class:"create-color-name",value:s.value.name,"onUpdate:value":a[0]||(a[0]=b=>s.value.name=b),valueModifiers:{trim:!0},maxlength:"8","show-count":"",clearable:"",onChange:X},null,8,["value"])]),_:1}),e(c,{type:"warning"},{default:o(()=>[y("底部图表仅展示 7 条数据")]),_:1})]),_:1}),e(Y,{style:{"max-height":"132px"}},{default:o(()=>[i("div",Me,[(p(!0),k(P,null,B(s.value.color,(b,f)=>(p(),k("div",{class:"color-list-item",key:f},[i("div",{class:se(["go-flex-items-center",{select:f===d.index}])},[e(E,{style:{width:"95px"},value:s.value.color[f],"onUpdate:value":H=>s.value.color[f]=H,"show-preview":!0,modes:["hex"],onComplete:H=>x(H,f),"onUpdate:show":H=>h(b,f)},null,8,["value","onUpdate:value","onComplete","onUpdate:show"]),Se(i("div",null,[e(A,{trigger:"hover"},{trigger:o(()=>[e(F,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3,onClick:H=>j(f)},{default:o(()=>[e(w(K))]),_:2},1032,["onClick"])]),default:o(()=>[y(" 删除颜色 ")]),_:2},1024)],512),[[Oe,f>5]])],2)]))),128)),i("div",null,[e(O,{type:"primary",secondary:"",onClick:U},{default:o(()=>[i("div",je,[Fe,e(F,{size:"16"},{default:o(()=>[e(w(Q))]),_:1})])]),_:1})])])]),_:1})]),_:1}),i("div",Ne,[e(z,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(N,null,{default:o(()=>[y("默认扩展色：")]),_:1}),e(V,{style:{margin:"10px 0"}}),e(g,{size:[4,0],justify:"center"},{default:o(()=>[(p(!0),k(P,null,B(S.value.default,(b,f)=>(p(),k("div",{class:"color-computed-item",key:f,onClick:H=>M(b,!1)},[qe,i("div",{style:J(u(b))},null,4)],8,Ve))),128))]),_:1})]),_:1}),e(z,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(N,null,{default:o(()=>[y("透明扩展色：")]),_:1}),e(V,{style:{margin:"10px 0"}}),e(g,{size:[4,0],justify:"center"},{default:o(()=>[(p(!0),k(P,null,B(S.value.fade,(b,f)=>(p(),k("div",{class:"color-computed-item",key:f,onClick:H=>M(b,!0)},[Je,i("div",{style:J(u(b))},null,4)],8,Ge))),128))]),_:1})]),_:1})]),e(w(W),{color:w(D)(s.value.color).splice(0,7)},null,8,["color"])])):ae("",!0)}}});const Ke=fe(Qe,[["__scopeId","data-v-27e1642f"]]),he=r=>(ve("data-v-7896f3dc"),r=r(),me(),r),We={class:"create-content"},Xe={class:"create-color-setting-box"},Ye={key:1,class:"no-data go-flex-center"},Ze=["src"],eo={class:"color-list-box"},oo={class:"color-list"},to=he(()=>i("span",null," 创建 ",-1)),lo=he(()=>i("span",null," 应用数据 ",-1)),no={class:"go-flex-items-center"},so=_e({__name:"index",props:{modelShow:Boolean},emits:["update:modelShow","editSaveHandle"],setup(r,{emit:_}){const v=r,T=_,{DuplicateOutlineIcon:Q,TrashIcon:K,ArrowDownIcon:W}=Ce.ionicons5,s={id:ue(),name:"未命名",color:["#6ae5bb","#69e3de","#5ac5ee","#5ac4ee","#4498ec","#3c7ddf"]},d=Le(),S=te(!1);let C=le(d.getEditCanvasConfig.chartCustomThemeColorInfo||[]);const u=te(void 0),h=le({selectInfo:C[0]});pe(()=>v.modelShow,t=>{S.value=t,t&&C.length&&(h.selectInfo=C[0])});const x=ne(()=>{var t;return(t=h==null?void 0:h.selectInfo)==null?void 0:t.id}),M=ne(()=>d.getEditCanvasConfig.chartThemeColor),U=t=>{t.id!==x.value&&(u.value!==void 0?L({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{u.value=void 0,h.selectInfo=t}}):h.selectInfo=t)},j=()=>{const t=()=>{const c=oe(ee({},D(s)),{id:ue()});h.selectInfo=c,C.push(c),U(c),u.value=c,a(!1)};u.value!==void 0?L({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{u.value=void 0,t()}}):t()},X=t=>{const c=()=>{C.splice(t,1),d.setEditCanvasConfig(G.CHART_CUSTOM_THEME_COLOR_INFO,D(C)),R(()=>{C.length?U(C[t-1>-1?t-1:t]):h.selectInfo=void 0})};u.value!==void 0?L({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{u.value=void 0,c()}}):L({message:"是否删除此颜色？",onPositiveCallback:()=>{c()}})},l=t=>{u.value=t},a=(t=!0)=>{if(!u.value)return;const c=C.findIndex(g=>{var E;return g.id===((E=u.value)==null?void 0:E.id)});if(c!==-1){t&&window.$message.success("数据应用成功！");const g=D(oe(ee({},u.value),{name:u.value.name||"未定义"}));C.splice(c,1,g),u.value=void 0;const E=d.getEditCanvasConfig.chartThemeColor;d.setEditCanvasConfig(G.CHART_THEME_COLOR,"dark"),R(()=>{d.setEditCanvasConfig(G.CHART_CUSTOM_THEME_COLOR_INFO,D(C)),d.setEditCanvasConfig(G.CHART_THEME_COLOR,E)})}else window.$message.error("数据应用失败！")},m=()=>{const t=()=>{u.value=void 0,h.selectInfo=void 0,T("update:modelShow",!1)};u.value!==void 0?L({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{t()}}):t()},I=t=>`linear-gradient(to right, ${t.color[0]} 0%, ${t.color[5]} 100%)`;return(t,c)=>{const g=n("n-text"),E=n("n-timeline-item"),F=n("n-timeline"),A=n("n-icon"),O=n("n-button"),Y=n("n-badge"),z=n("n-space"),N=n("n-divider"),V=n("n-a"),b=n("n-ellipsis"),f=n("n-card"),H=n("n-tooltip"),ge=n("n-modal");return p(),q(ge,{class:"go-chart-create-color",show:S.value,"onUpdate:show":c[0]||(c[0]=$=>S.value=$),"mask-closable":!1,closeOnEsc:!1},{default:o(()=>[e(f,{bordered:!1,role:"dialog",size:"small","aria-modal":"true",style:{width:"900px",height:"720px"}},{header:o(()=>[]),"header-extra":o(()=>[]),action:o(()=>[e(z,{justify:"end"},{default:o(()=>[e(O,{onClick:m},{default:o(()=>[y("操作完成")]),_:1})]),_:1})]),default:o(()=>[i("div",We,[i("div",Xe,[x.value?(p(),q(w(Ke),{key:0,selectColor:h.selectInfo,onUpdateColor:l},null,8,["selectColor"])):(p(),k("div",Ye,[i("img",{src:w(Ae),alt:"暂无数据"},null,8,Ze),e(g,{depth:3},{default:o(()=>[y("暂未选择自定义颜色")]),_:1})]))]),i("div",eo,[e(F,{class:"pond-item-timeline",style:{width:"20px"}},{default:o(()=>[e(E,{type:"info"}),e(E,{type:"success"})]),_:1}),i("div",oo,[e(z,null,{default:o(()=>[e(O,{class:se(["create-btn",{"is-full":!x.value}]),type:"primary",ghost:!x.value,secondary:!!x.value,onClick:j},{icon:o(()=>[e(A,null,{default:o(()=>[e(w(Q))]),_:1})]),default:o(()=>[to]),_:1},8,["class","ghost","secondary"]),x.value?(p(),q(Y,{key:0,show:u.value!==void 0,dot:""},{default:o(()=>[e(O,{class:"create-btn",type:"info",secondary:"",onClick:a},{icon:o(()=>[e(A,null,{default:o(()=>[e(w(W))]),_:1})]),default:o(()=>[lo]),_:1})]),_:1},8,["show"])):ae("",!0)]),_:1}),e(N,{style:{margin:"10px 0"}}),x.value?ae("",!0):(p(),q(g,{key:0,class:"not-data-text",depth:3},{default:o(()=>[y(" 暂无自定义颜色， "),e(V,{onClick:j},{default:o(()=>[y("立即创建")]),_:1})]),_:1})),(p(!0),k(P,null,B(w(C),($,re)=>(p(),k("div",{class:"color-card-box",key:re},[e(f,{class:se(["color-card",{selected:$.id===x.value}]),size:"small",hoverable:"",embedded:"",onClick:Z=>U($)},{default:o(()=>[i("div",no,[e(b,{style:{"text-align":"left",width:"70px"}},{default:o(()=>[y(Ue($.name),1)]),_:2},1024),(p(!0),k(P,null,B($.color,(Z,ke)=>(p(),k("span",{class:"theme-color-item",key:ke,style:J({backgroundColor:Z})},null,4))),128))]),i("div",{class:"theme-bottom",style:J({backgroundImage:I($)})},null,4)]),_:2},1032,["class","onClick"]),e(H,{trigger:"hover"},{trigger:o(()=>[e(O,{text:"",disabled:$.id===M.value,onClick:Z=>X(re)},{default:o(()=>[e(A,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3},{default:o(()=>[e(w(K))]),_:1})]),_:2},1032,["disabled","onClick"])]),default:o(()=>[y(" 删除自定义颜色 ")]),_:2},1024)]))),128))])])])]),_:1})]),_:1},8,["show"])}}});const fo=fe(so,[["__scopeId","data-v-7896f3dc"]]);export{fo as default};
