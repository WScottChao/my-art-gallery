var gt=Object.defineProperty,mt=Object.defineProperties;var Ct=Object.getOwnPropertyDescriptors;var je=Object.getOwnPropertySymbols;var yt=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var Je=(e,o,s)=>o in e?gt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,A=(e,o)=>{for(var s in o||(o={}))yt.call(o,s)&&Je(e,s,o[s]);if(je)for(var s of je(o))St.call(o,s)&&Je(e,s,o[s]);return e},ge=(e,o)=>mt(e,Ct(o));var de=(e,o,s)=>new Promise((_,t)=>{var h=p=>{try{v(s.next(p))}catch(i){t(i)}},l=p=>{try{v(s.throw(p))}catch(i){t(i)}},v=p=>p.done?_(p.value):Promise.resolve(p.value).then(h,l);v((s=s.apply(e,o)).next())});import{o as Ke,$ as at,d0 as Tt,aT as Xe,d1 as z,bi as ke,bo as He,as as xt,d as j,bn as he,O as fe,G as M,k as w,c as Y,aC as ze,F as re,l as ue,ab as ne,aF as q,f as a,a7 as $e,b as $,z as ee,aL as rt,C as N,w as T,D as _e,aE as Ne,aJ as De,aK as Be,aG as ct,ar as Z,Z as lt,a as Fe,at as Ze,H as ae,aD as it,j as I,d2 as wt,Y as ye,r as X,d3 as Qe,p as Me,q as Re,e as x,g as Et,n as ve,t as Q,b3 as bt,cP as B,cQ as K,b4 as pe,cO as Lt,Q as Ee,U as be,bh as kt,ao as Dt,aS as It,d4 as $t,au as Mt,d5 as Rt,A as Ut,ax as et,aa as Ot,L as Ht,d6 as At,aU as Pt,N as Yt,az as Xt,aA as we,aR as Ae,d7 as Nt,bC as Bt}from"./index-9e787fa5.js";import{u as We,d as Gt}from"./index-81fca23c.js";import{u as te,f as V,h as D,i as Le,a as Kt}from"./chartEditStore-56d3c83a.js";import{e as zt,S as Ft}from"./index-f6f97c94.js";import{a as Wt}from"./useKeyboard.hook-61c9323f.js";import{u as ut}from"./useSync.hook-87506693.js";import{a as Vt,b as tt,l as qt,g as jt}from"./plugin-e1dac962.js";import{C as Jt}from"./index-7a7f5976.js";import"./querySelectorAll-a1c431d2.js";import{l as ot}from"./listen-92ff7612.js";import{u as dt,C as pt}from"./chartLayoutStore-58ece452.js";import{i as le}from"./icon-caec1666.js";import{G as Zt}from"./index.vue_vue_type_script_setup_true_lang-1414f1f1.js";import{F as st}from"./fileTypeEnum-21359a08.js";import{u as Qt}from"./useSyncUpdate.hook-95de8bac.js";import"./SettingItem-264e825b.js";/* empty css                                                                      */import"./SettingItemBox-ee4024ad.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-374cf080.js";import"./index.esm.min-33db7d4b.js";import"./project-c1868b8d.js";import"./index-567c51a3.js";const me=te(),eo=e=>{let o=()=>{};Ke(()=>de(void 0,null,function*(){me.setEditCanvas(V.EDIT_LAYOUT_DOM,document.getElementById("go-chart-edit-layout")),me.setEditCanvas(V.EDIT_CONTENT_DOM,document.getElementById("go-chart-edit-content")),yield e(),o=me.listenerScale()})),at(()=>{me.setEditCanvas(V.EDIT_LAYOUT_DOM,null),me.setEditCanvas(V.EDIT_CONTENT_DOM,null),o()})},S=te(),{onClickOutSide:to}=We(),oo=e=>de(void 0,null,function*(){e.preventDefault();try{Vt();const o=e.dataTransfer.getData(Tt.DRAG_KEY);if(!o){tt();return}S.setEditCanvas(V.IS_CREATE,!1);const s=Xe(o);if(s.disabled)return;let _=yield zt(s);s.redirectComponent&&(s.dataset&&(_.option.dataset=s.dataset),_.chartConfig.title=s.title,_.chartConfig.chartFrame=s.chartFrame),z(_,e.offsetX-_.attr.w/2,e.offsetY-_.attr.h/2),S.addComponentList(_,!1,!0),S.setTargetSelectChart(_.id),tt()}catch(o){qt(),window.$message.warning("å›¾è¡¨æ­£åœ¨ç ”å‘ä¸­, æ•¬è¯·æœŸå¾…...")}}),nt=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")},_t=(e,o)=>{if(o){S.setTargetSelectChart(o.id);return}S.setTargetSelectChart(void 0)},so=(e,o)=>{var i;if(e.which==2||(i=window.$KeyboardActive)!=null&&i.space)return;_t();const s=e.offsetX,_=e.offsetY,t=e.screenX,h=e.screenY,l=S.getEditCanvas.scale;S.setMousePosition(void 0,void 0,s,_);const v=ke.throttle(d=>{S.setTargetSelectChart(),S.setEditCanvas(V.IS_SELECT,!0);const r=s+d.screenX-t,n=_+d.screenY-h;S.setMousePosition(r,n);const f={x1:0,y1:0,x2:0,y2:0};r>s&&n>_?(f.x1=s,f.y1=_,f.x2=Math.round(s+(d.screenX-t)/l),f.y2=Math.round(_+(d.screenY-h)/l)):r>s&&n<_?(f.x1=s,f.y1=Math.round(_-(h-d.screenY)/l),f.x2=Math.round(s+(d.screenX-t)/l),f.y2=_):r<s&&n>_?(f.x1=Math.round(s-(t-d.screenX)/l),f.y1=_,f.x2=s,f.y2=Math.round(_+(d.screenY-h)/l)):(f.x1=Math.round(s-(t-d.screenX)/l),f.y1=Math.round(_-(h-d.screenY)/l),f.x2=s,f.y2=_),S.getComponentList.forEach(u=>{if(!S.getTargetChart.selectId.includes(u.id)){const{x:c,y:C,w:g,h:E}=u.attr,b={x1:c,y1:C,x2:c+g,y2:C+E};b.x1-f.x1>=0&&b.y1-f.y1>=0&&b.x2-f.x2<=0&&b.y2-f.y2<=0&&!u.status.lock&&!u.status.hide&&S.setTargetSelectChart(u.id,!0)}})},30),p=()=>{v.cancel(),S.setEditCanvas(V.IS_SELECT,!1),S.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",v),document.addEventListener("mouseup",p)},vt=()=>({mouseClickHandle:(t,h)=>{var l;if(t.preventDefault(),t.stopPropagation(),!h.status.lock&&(l=window.$KeyboardActive)!=null&&l.ctrl)if(S.targetChart.selectId.includes(h.id)){const v=S.targetChart.selectId.filter(p=>p!==h.id);S.setTargetSelectChart(v)}else S.setTargetSelectChart(h.id,!0)},mousedownHandle:(t,h)=>{var C;if(t.preventDefault(),t.stopPropagation(),h.status.lock||(to(),t.buttons===He.LEFT&&((C=window.$KeyboardActive)!=null&&C.ctrl)))return;const l=S.getTargetChart.selectId;if(t.buttons===He.RIGHT&&l.length>1&&l.includes(h.id)||(S.setTargetSelectChart(h.id),t.buttons===He.RIGHT))return;const v=S.getEditCanvas.scale,p=S.getEditCanvasConfig.width,i=S.getEditCanvasConfig.height,d=new Map;S.getTargetChart.selectId.forEach(g=>{const E=S.fetchTargetIndex(g);if(E!==-1){const{x:b,y:k,w:O,h:G}=xt(S.getComponentList[E]).attr;d.set(g,{x:b,y:k,w:O,h:G})}});const r=t.screenX,n=t.screenY;let f=[];S.getTargetChart.selectId.forEach(g=>{if(!d.has(g))return;const E=S.fetchTargetIndex(g);f.push(ke.cloneDeep(S.getComponentList[E]))}),S.setMousePosition(void 0,void 0,r,n);const u=ke.throttle(g=>{S.setEditCanvas(V.IS_DRAG,!0),S.setMousePosition(g.screenX,g.screenY);let E=(g.screenX-r)/v,b=(g.screenY-n)/v;S.getTargetChart.selectId.forEach(k=>{if(!d.has(k))return;const O=S.fetchTargetIndex(k),{x:G,y:se,w:P,h:m}=d.get(k),R=S.getComponentList[O];let y=Math.round(G+E),L=Math.round(se+b);const U=50;y=y<-P+U?-P+U:y,L=L<-m+U?-m+U:L,y=y>p-U?p-U:y,L=L>i-U?i-U:L,R&&(R.attr=Object.assign(R.attr,{x:y,y:L}))})},20),c=()=>{try{if(S.setMousePosition(0,0,0,0),S.setEditCanvas(V.IS_DRAG,!1),f.length){S.getTargetChart.selectId.forEach(E=>{if(!d.has(E))return;const b=S.fetchTargetIndex(E),k=S.getComponentList[b];f.forEach(O=>{O.id===E&&(O.attr=Object.assign(O.attr,{offsetX:k.attr.x-O.attr.x,offsetY:k.attr.y-O.attr.y}))})});const g=f.filter(E=>E.attr.offsetX!==0&&E.attr.offsetY!==0);g.length&&S.moveComponentList(g)}document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c)}catch(g){console.log(g)}};document.addEventListener("mousemove",u),document.addEventListener("mouseup",c)},mouseenterHandle:(t,h)=>{t.preventDefault(),t.stopPropagation(),S.getEditCanvas.isSelect||S.setTargetHoverChart(h.id)},mouseleaveHandle:(t,h)=>{t.preventDefault(),t.stopPropagation(),S.setEditCanvas(V.IS_DRAG,!1),S.setTargetHoverChart(void 0)}}),no=(e,o,s)=>{e.stopPropagation(),e.preventDefault(),S.setEditCanvas(V.IS_DRAG,!0);const _=S.getEditCanvas.scale,t=s.x,h=s.y,l=s.w,v=s.h,p=e.screenX,i=e.screenY;S.setMousePosition(p,i);const d=ke.throttle(n=>{S.setMousePosition(n.screenX,n.screenY);let f=Math.round((n.screenX-p)/_),u=Math.round((n.screenY-i)/_);const c=/t/.test(o),C=/b/.test(o),g=/l/.test(o),E=/r/.test(o),b=v+(c?-u:C?u:0),k=l+(g?-f:E?f:0);s.h=b>0?b:0,s.w=k>0?k:0,s.x=t+(g?f:0),s.y=h+(c?u:0)},50),r=()=>{S.setEditCanvas(V.IS_DRAG,!1),S.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",r)},Ie=(e,o)=>e?{zIndex:o+1,left:`${e.x}px`,top:`${e.y}px`}:{},ie=(e,o)=>e?{width:`${o?o*e.w:e.w}px`,height:`${o?o*e.h:e.h}px`}:{},ao=(e,o,s,_)=>{const{w:t,h}=s,l=/t/.test(e),v=/b/.test(e),p=/l/.test(e),i=/r/.test(e);let d=0,r=0;return e.length===2?(d=p?0:t,r=l?0:h):((l||v)&&(d=t/2,r=l?0:h),(p||i)&&(d=p?0:t,r=Math.floor(h/2))),{left:`${d}px`,top:`${r}px`,cursor:_[o]+"-resize"}},ro=["onMousedown"],co=j({__name:"index",props:{item:{type:Object,required:!0},hiddenPoint:{type:Boolean,required:!1}},setup(e){he(r=>({"2707b0c4":l.value}));const o=e,s=fe(),_=te(),t=["t","r","b","l","lt","rt","lb","rb"],h=["n","e","s","w","nw","ne","sw","se"],l=M(()=>s.getAppTheme),v=M(()=>_.getEditCanvas[V.IS_DRAG]||o.item.status.lock?!1:o.item.id===_.getTargetChart.hoverId),p=M(()=>{const r=o.item.id;return o.item.status.lock?!1:_.getTargetChart.selectId.find(n=>n===r)}),i=M(()=>o.item.status.lock),d=M(()=>o.item.status.hide);return(r,n)=>(w(),Y("div",{class:ne(["go-shape-box",{lock:i.value,hide:d.value}])},[ze(r.$slots,"default",{},void 0,!0),e.hiddenPoint?$e("",!0):(w(!0),Y(re,{key:0},ue(p.value?t:[],(f,u)=>(w(),Y("div",{class:ne(`shape-point ${f}`),key:u,style:q(a(ao)(f,u,e.item.attr,h)),onMousedown:c=>a(no)(c,f,e.item.attr)},null,46,ro))),128)),$("div",{class:"shape-modal",style:q(a(ie)(e.item.attr))},[$("div",{class:ne(["shape-modal-select",{active:p.value}])},null,2),$("div",{class:ne(["shape-modal-change",{selectActive:p.value,hoverActive:v.value}])},null,2)],4)],2))}});const Ge=ee(co,[["__scopeId","data-v-301ec8d2"]]),lo={class:"go-edit-group-box"},io=j({__name:"index",props:{groupData:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(e){const o=te(),{handleContextMenu:s}=We(),{mouseenterHandle:_,mouseleaveHandle:t,mousedownHandle:h,mouseClickHandle:l}=vt(),v=(d,r,n)=>{const f=u=>r.filter(c=>u.includes(c.key));if(o.getTargetChart.selectId.length>1)return f([Z.GROUP,Z.DELETE]);{const u=[];n.status.lock?u.push(Z.LOCK):u.push(Z.UNLOCK),n.status.hide?u.push(Z.HIDE):u.push(Z.SHOW);const c=[Z.UN_GROUP];return[...f(c),Gt(),...d.filter(C=>!u.includes(C.key))]}},p=M(()=>rt(o.getEditCanvasConfig.chartCustomThemeColorInfo)[o.getEditCanvasConfig.chartThemeColor]),i=M(()=>o.getEditCanvasConfig.chartThemeSetting);return(d,r)=>(w(),Y("div",lo,[(w(),N(a(Ge),{key:e.groupData.id,"data-id":e.groupData.id,index:e.groupIndex,item:e.groupData,hiddenPoint:!0,class:ne(a(Ne)(e.groupData.styles.animations)),style:q(A(A(A(A(A({},a(Ie)(e.groupData.attr,e.groupIndex)),a(ie)(e.groupData.attr)),a(De)(e.groupData.styles)),a(Be)(e.groupData.styles)),a(ct)(e.groupData.styles))),onClick:r[0]||(r[0]=n=>a(l)(n,e.groupData)),onMousedown:r[1]||(r[1]=n=>a(h)(n,e.groupData)),onMouseenter:r[2]||(r[2]=n=>a(_)(n,e.groupData)),onMouseleave:r[3]||(r[3]=n=>a(t)(n,e.groupData)),onContextmenu:r[4]||(r[4]=n=>a(s)(n,e.groupData,v))},{default:T(()=>[(w(!0),Y(re,null,ue(e.groupData.groupList,n=>(w(),N(a(Ge),{key:n.id,"data-id":n.id,index:e.groupIndex,item:n,hiddenPoint:!0,style:q(A({},a(Ie)(n.attr,e.groupIndex)))},{default:T(()=>[(w(),N(_e(n.chartConfig.chartKey),{class:ne(["edit-content-chart",a(Ne)(n.styles.animations)]),chartConfig:n,themeSetting:i.value,themeColor:p.value,style:q(A(A(A({},a(ie)(n.attr)),a(De)(n.styles)),a(Be)(n.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","item","style"]))),128))]),_:1},8,["data-id","index","item","class","style"]))]))}}),uo={class:"go-edit-align-line"},po=j({__name:"index",setup(e){he(u=>({"05d3f33b":l.value}));const o=fe(),s=te(),_=lt(),t=Fe({lineArr:["rowt","rowc","rowb","coll","colc","colr"],select:new Map,sorptioned:{x:!1,y:!1}}),h=u=>u?{left:`${u.x?u.x:0}px`,top:`${u.y?u.y:0}px`}:{},l=M(()=>o.getAppTheme),v=M(()=>_.getChartAlignRange),p=M(()=>s.getEditCanvas[V.IS_DRAG]),i=(u,c)=>Math.abs(u-c)<=v.value,d=M(()=>s.getTargetChart.selectId),r=M(()=>s.getComponentList[s.fetchTargetIndex()]),n=M(()=>{var u;return((u=r.value)==null?void 0:u.attr)||{}}),f=M(()=>({id:"0",attr:{w:Ze(s.getEditCanvasConfig.width),h:Ze(s.getEditCanvasConfig.height),x:0,y:0,offsetX:0,offsetY:0,zIndex:0}}));return ae(()=>s.getMousePosition,it(()=>{try{if(!p.value||d.value.length!==1)return;const u=n.value.w,c=n.value.h,C=n.value.x,g=C+u/2,E=C+u,b=[C,g,E],k=n.value.y,O=k+c/2,G=k+c,se=[k,O,G];t.select.clear(),t.sorptioned.y=!1;const P=s.getComponentList.map(m=>({id:m.id,attr:m.attr}));P.push(f.value),t.lineArr.forEach(m=>{P.forEach(R=>{if(d.value[0]===R.id)return;const y=R.attr.w,L=R.attr.h,U=R.attr.x,W=U+y/2,H=U+y,Se=[U,W,H],F=R.attr.y,J=F+L/2,oe=F+L,qe=[F,J,oe];m.includes("rowt")&&(i(k,F)&&(t.select.set(m,{y:F}),z(r.value,C,F)),i(k,J)&&(t.select.set(m,{y:J}),z(r.value,C,J)),i(k,oe)&&(t.select.set(m,{y:oe}),z(r.value,C,oe))),m.includes("rowc")&&(i(O,F)&&(t.select.set(m,{y:F}),z(r.value,C,F-c/2)),i(O,J)&&(t.select.set(m,{y:J}),z(r.value,C,J-c/2)),i(O,oe)&&(t.select.set(m,{y:oe}),z(r.value,C,oe-c/2))),m.includes("rowb")&&(i(G,F)&&(t.select.set(m,{y:F}),z(r.value,C,F-c)),i(G,J)&&(t.select.set(m,{y:J}),z(r.value,C,J-c)),i(G,oe)&&(t.select.set(m,{y:oe}),z(r.value,C,oe-c))),m.includes("coll")&&(i(C,U)&&(t.select.set(m,{x:U}),z(r.value,U,k)),i(C,W)&&(t.select.set(m,{x:W}),z(r.value,W,k)),i(C,H)&&(t.select.set(m,{x:H}),z(r.value,H,k))),m.includes("colc")&&(i(g,U)&&(t.select.set(m,{x:U}),z(r.value,U-u/2,k)),i(g,W)&&(t.select.set(m,{x:W}),z(r.value,W-u/2,k)),i(g,H)&&(t.select.set(m,{x:H}),z(r.value,H-u/2,k))),m.includes("colr")&&(i(E,U)&&(t.select.set(m,{x:U}),z(r.value,U-u,k)),i(E,W)&&(t.select.set(m,{x:W}),z(r.value,W-u,k)),i(E,H)&&(t.select.set(m,{x:H}),z(r.value,H-u,k)))})})}catch(u){console.log(u)}},200),{deep:!0}),ae(()=>p.value,u=>{u||(t.select.clear(),t.sorptioned.y=!1)}),(u,c)=>(w(),Y("div",uo,[(w(!0),Y(re,null,ue(t.lineArr,C=>(w(),Y("div",{class:ne(["line",[C.includes("row")?"row":"col",t.select.has(C)&&"visible"]]),key:C,style:q(h(t.select.get(C)))},null,6))),128))]))}});const _o=ee(po,[["__scopeId","data-v-41025e73"]]),vo=j({__name:"index",setup(e){return(o,s)=>{const _=I("n-watermark");return w(),N(_,{id:"go-edit-watermark",content:a(wt),cross:"",selectable:"","font-size":16,"line-height":16,width:500,height:150,"x-offset":12,"y-offset":80,rotate:-15},null,8,["content"])}}});const ho=ee(vo,[["__scopeId","data-v-e5767c3f"]]),ht=e=>(Me("data-v-02b12a9c"),e=e(),Re(),e),fo=ht(()=>$("div",{class:"select-background"},null,-1)),go=ht(()=>$("div",{class:"select-border"},null,-1)),mo=[fo,go],Co=j({__name:"index",setup(e){he(v=>({d910e7cc:h.value}));const o=fe(),s=te(),{isSelect:_,scale:t}=ye(s.getEditCanvas),h=M(()=>o.getAppTheme),l=X();return ae(()=>s.getMousePosition,v=>{if(!_.value)return;const{startX:p,startY:i,x:d,y:r}=v,n={zIndex:Qe,x:0,y:0,w:0,h:0,offsetX:0,offsetY:0};d>p&&r>i?(n.x=p,n.y=i,n.w=Math.round((d-p)/t.value),n.h=Math.round((r-i)/t.value)):d>p&&r<i?(n.x=p,n.w=Math.round((d-p)/t.value),n.h=Math.round((i-r)/t.value),n.y=i-n.h):d<p&&r>i?(n.y=i,n.w=Math.round((p-d)/t.value),n.h=Math.round((r-i)/t.value),n.x=p-n.w):(n.w=Math.round((p-d)/t.value),n.h=Math.round((i-r)/t.value),n.x=p-n.w,n.y=i-n.h),l.value=A(A({},Ie(n,Qe)),ie(n))},{deep:!0}),(v,p)=>a(_)?(w(),Y("div",{key:0,class:"go-edit-select",style:q(l.value)},mo,4)):$e("",!0)}});const yo=ee(Co,[["__scopeId","data-v-02b12a9c"]]),So=j({__name:"index",setup(e){const o=te(),{getEditCanvasConfig:s,getEditCanvas:_}=ye(o),t=M(()=>({w:s.value.width,h:s.value.height})),h=M(()=>{const v={transform:`scale(${_.value.scale})`};return A(A({},ie(t.value)),v)}),l=M(()=>{const v=_.value.isCreate&&{"z-index":99999};return A(A({},ie(t.value)),v)});return(v,p)=>(w(),Y("div",{class:"go-edit-range go-transition",style:q(h.value),onMousedown:p[0]||(p[0]=i=>a(so)(i,void 0))},[ze(v.$slots,"default",{},void 0,!0),x(a(ho)),x(a(_o)),x(a(yo)),$("div",{class:"go-edit-range-model",style:q(l.value)},null,4)],36))}});const To=ee(So,[["__scopeId","data-v-7803f120"]]),xo={class:"go-sketch-rule"},Pe=20,wo=j({__name:"index",setup(e){he(y=>({"353d8c07":k.value,"3bfde832":E.value,"4d6ad0ae":r.value}));const o=te(),s=dt(),_=fe();let t=[0,0],h=[0,0];const l=X(),v=X(!0),p=X(),i=X(),d=X(!1),r=X("auto"),{width:n,height:f}=ye(o.getEditCanvasConfig),u=X(0),c=X(0),C=Fe({h:[],v:[]}),g=M(()=>o.getEditCanvas.scale),E=M(()=>`${f.value*2}px`),b=M(()=>_.getDarkTheme?{bgColor:"#18181c",longfgColor:"#4d4d4d",shortfgColor:"#4d4d4d",fontColor:"#4d4d4d",shadowColor:"#18181c",borderColor:"#18181c",cornerActiveColor:"#18181c"}:{}),k=M(()=>_.getAppTheme),O=y=>{if(y.ctrlKey||y.metaKey){y.preventDefault();let L=g.value;if(y.wheelDelta>=0&&g.value<2){L=g.value+.05,o.setScale(L);return}y.wheelDelta<0&&g.value>.1&&(L=g.value-.05,o.setScale(L))}},G=()=>{if(!l.value)return;const y=l.value.getBoundingClientRect(),L=p.value.getBoundingClientRect();u.value=(y.left+Pe-L.left)/g.value,c.value=(y.top+Pe-L.top)/g.value},se=y=>{var Se,F;if(y.preventDefault(),y.stopPropagation(),y.which==2)d.value=!0;else if(!((Se=window.$KeyboardActive)!=null&&Se.space))return;(F=document.activeElement)==null||F.blur();const L=y.pageX,U=y.pageY,W=ot(window,"mousemove",J=>{const oe=J.pageX-L,qe=J.pageY-U,[Ue,Te]=t,[Oe,xe]=h;t=[Te,oe],h=[xe,qe],l.value.scrollLeft-=Te>Ue?Math.abs(Te-Ue):-Math.abs(Te-Ue),l.value.scrollTop-=xe>Oe?Math.abs(xe-Oe):-Math.abs(xe-Oe)}),H=ot(window,"mouseup",()=>{W(),H(),t=[0,0],h=[0,0],d.value=!1})},P=()=>{const y=document.getElementById("go-chart-edit-layout");return y?{height:y.clientHeight-20,width:y.clientWidth-20}:{width:n.value,height:f.value}},m=()=>{v.value=!1,setTimeout(()=>{v.value=!0},10)},R=()=>{const{width:y,height:L}=i.value.getBoundingClientRect(),{width:U,height:W}=P();l.value.scrollLeft=y/2-U/2,l.value.scrollTop=L/2-W/2};return ae(()=>_.getDarkTheme,()=>{m()}),ae(()=>g.value,(y,L)=>{L!==y&&s.getRePositionCanvas?(s.setItemUnHandle(pt.RE_POSITION_CANVAS,!1),G(),setTimeout(()=>{R(),m()},400)):it(m,20)}),ae(()=>d.value,y=>{r.value=y?"grab":"auto"}),Ke(()=>{l.value&&(l.value.addEventListener("wheel",O,{passive:!1}),R())}),at(()=>{l.value&&l.value.removeEventListener("wheel",O)}),window.onKeySpacePressHold=y=>{d.value=y},(y,L)=>{const U=I("sketch-rule");return w(),Y("div",xo,[v.value?(w(),N(U,{key:0,thick:Pe,scale:g.value,width:P().width,height:P().height,startX:u.value,startY:c.value,lines:C,palette:b.value},null,8,["scale","width","height","startX","startY","lines","palette"])):$e("",!0),$("div",{ref_key:"$app",ref:l,class:"edit-screens",onScroll:G},[$("div",{ref_key:"$container",ref:i,class:"edit-screen-container",style:q({width:a(n)*2+"px"})},[$("div",{ref_key:"refSketchRuleBox",ref:p,class:"canvas",onMousedown:se,style:q({marginLeft:"-"+(P().width/2-25)+"px"})},[$("div",{style:q({pointerEvents:d.value?"none":"auto"})},[ze(y.$slots,"default",{},void 0,!0)],4)],36)],4)],544)])}}});const Eo=ee(wo,[["__scopeId","data-v-07562d30"]]),Ye={[D.ADD]:"æ–°å¢ž",[D.DELETE]:"åˆ é™¤",[D.UPDATE]:"æ›´æ–°",[D.MOVE]:"ç§»åŠ¨",[D.PASTE]:"ç²˜è´´",[D.COPY]:"å¤åˆ¶",[D.CUT]:"å‰ªåˆ‡",[D.TOP]:"ç½®é¡¶",[D.BOTTOM]:"ç½®åº•",[D.UP]:"ä¸Šç§»",[D.DOWN]:"ä¸‹ç§»",[D.GROUP]:"æˆç»„",[D.UN_GROUP]:"è§£ç»„",[D.LOCK]:"é”å®š",[D.UNLOCK]:"è§£é”",[D.HIDE]:"éšè—",[D.SHOW]:"æ˜¾ç¤º",[Le.CANVAS]:"ç”»å¸ƒåˆå§‹åŒ–"};var bo=Array.prototype,Lo=bo.reverse;function ko(e){return e==null?e:Lo.call(e)}var Do=ko;const Io=Et(Do),ft=e=>(Me("data-v-009cfccc"),e=e(),Re(),e),$o={class:"go-flex-items-center"},Mo=ft(()=>$("span",{class:"btn-text"},"åŽ†å²è®°å½•",-1)),Ro={class:"history-list-box"},Uo=["title"],Oo=ft(()=>$("div",{class:"popover-modal"},null,-1)),Ho=j({__name:"index",setup(e){const{DesktopOutlineIcon:o,PencilIcon:s,TrashIcon:_,CopyIcon:t,LayersIcon:h,DuplicateIcon:l,HelpOutlineIcon:v,LockClosedOutlineIcon:p,LockOpenOutlineIcon:i,EyeOffOutlineIcon:d,EyeOutlineIcon:r}=le.ionicons5,{StackedMoveIcon:n,Carbon3DCursorIcon:f,Carbon3DSoftwareIcon:u}=le.carbon,c=Kt(),C=b=>{if(b.targetType===Le.CANVAS)return o;switch(b.actionType){case D.UPDATE:return s;case D.DELETE:return _;case D.PASTE:return t;case D.TOP:return h;case D.BOTTOM:return h;case D.UP:return h;case D.DOWN:return h;case D.MOVE:return n;case D.ADD:return l;case D.GROUP:return f;case D.UN_GROUP:return u;case D.LOCK:return p;case D.UNLOCK:return i;case D.HIDE:return d;case D.SHOW:return r;default:return s}},g=b=>{if(b.targetType===Le.CANVAS)return Ye[Le.CANVAS];if(b.actionType===D.GROUP||b.actionType===D.UN_GROUP)return`${Ye[b.actionType]}`;if(b.historyData.length)return`${Ye[b.actionType]} - ${b.historyData[0].chartConfig.title}`},E=M(()=>{const k=c.getBackStack.map(O=>({label:g(O),icon:C(O)}));return Io(k.filter(O=>O.label))});return(b,k)=>{const O=I("n-button"),G=I("n-icon"),se=I("n-text"),P=I("n-scrollbar"),m=I("n-popover"),R=I("n-tooltip");return w(),Y("div",$o,[x(m,{class:"edit-history-popover","show-arrow":!1,size:"small",trigger:"click",placement:"top-start"},{trigger:T(()=>[x(O,{class:"mr-10",secondary:"",size:"small",disabled:E.value.length===0},{default:T(()=>[Mo]),_:1},8,["disabled"])]),default:T(()=>[$("div",Ro,[x(P,{style:{"max-height":"500px"}},{default:T(()=>[(w(!0),Y(re,null,ue(E.value,(y,L)=>(w(),Y("div",{class:"list-item go-flex-items-center go-ellipsis-1",key:L,title:y.label},[x(G,{class:"item-icon",size:"16",depth:2,component:y.icon},null,8,["component"]),x(se,{depth:"2"},{default:T(()=>[ve(Q(y.label),1)]),_:2},1024)],8,Uo))),128))]),_:1}),Oo])]),_:1}),x(R,{trigger:"hover"},{trigger:T(()=>[x(G,{size:"21",depth:3},{default:T(()=>[x(a(v))]),_:1})]),default:T(()=>[$("span",null,"æœ€å¤šåªä¿ç•™"+Q(a(bt))+"æ¡è®°å½•",1)]),_:1})])}}});const Ao=ee(Ho,[["__scopeId","data-v-009cfccc"]]),Ve=e=>(Me("data-v-b3c8d1a4"),e=e(),Re(),e),Po=Ve(()=>$("th",null,"åŠŸèƒ½",-1)),Yo=Ve(()=>$("th",null,"Win å¿«æ·é”®",-1)),Xo=Ve(()=>$("span",null," Mac å¿«æ·é”® ",-1)),No={key:0},Bo={key:1},Go=j({__name:"ShortcutKeyModal",props:{modelShow:Boolean},emits:["update:modelShow"],setup(e,{emit:o}){const{CloseIcon:s}=le.ionicons5,_=X(!1),t=o,h=e;ae(()=>h.modelShow,p=>{_.value=p});const l=[{label:"æ‹–æ‹½ç”»å¸ƒ",win:`${B.SPACE.toUpperCase()} + ðŸ–±ï¸ `,mac:`${K.SPACE.toUpperCase()} + ðŸ–±ï¸ `,macSource:!0},{label:"å‘ ä¸Š/å³/ä¸‹/å·¦ ç§»åŠ¨",win:`${B.CTRL.toUpperCase()} + â†‘ æˆ– â†’ æˆ– â†“ æˆ– â†`,mac:`${K.CTRL.toUpperCase()} + â†‘ `},{label:"é”å®š",win:`${B.CTRL.toUpperCase()} + L `,mac:`${K.CTRL.toUpperCase()} + L `},{label:"è§£é”",win:`${B.CTRL.toUpperCase()} + ${B.SHIFT.toUpperCase()}+ L `,mac:`${K.CTRL.toUpperCase()} + ${K.SHIFT.toUpperCase()} + L `},{label:"å±•ç¤º",win:`${B.CTRL.toUpperCase()} + H `,mac:`${K.CTRL.toUpperCase()} + H `},{label:"éšè—",win:`${B.CTRL.toUpperCase()} + ${B.SHIFT.toUpperCase()} + H `,mac:`${K.CTRL.toUpperCase()} + ${K.SHIFT.toUpperCase()} + H `},{label:"åˆ é™¤",win:"Delete".toUpperCase(),mac:`${K.CTRL.toUpperCase()} + Backspace `},{label:"å¤åˆ¶",win:`${B.CTRL.toUpperCase()} + C `,mac:`${K.CTRL.toUpperCase()} + C `},{label:"å‰ªåˆ‡",win:`${B.CTRL.toUpperCase()} + X `,mac:`${K.CTRL.toUpperCase()} + X `},{label:"ç²˜è´´",win:`${B.CTRL.toUpperCase()} + V `,mac:`${K.CTRL.toUpperCase()} + V `},{label:"åŽé€€",win:`${B.CTRL.toUpperCase()} + Z `,mac:`${K.CTRL.toUpperCase()} + Z `},{label:"å‰è¿›",win:`${B.CTRL.toUpperCase()} + ${B.SHIFT.toUpperCase()} + Z `,mac:`${K.CTRL.toUpperCase()} + ${K.SHIFT.toUpperCase()} + Z `},{label:"ä¿å­˜",win:`${B.CTRL.toUpperCase()} + S `,mac:`${K.CTRL.toUpperCase()} + S `},{label:"å¤šé€‰",win:`${B.CTRL.toUpperCase()} + ðŸ–±ï¸ `,mac:`${K.CTRL.toUpperCase()} + ðŸ–±ï¸ `},{label:"åˆ›å»ºåˆ†ç»„",win:`${B.CTRL.toUpperCase()} + G / ðŸ–±ï¸ `,mac:`${K.CTRL.toUpperCase()} + G / ðŸ–±ï¸`},{label:"è§£é™¤åˆ†ç»„",win:`${B.CTRL.toUpperCase()} + ${B.SHIFT.toUpperCase()} + G `,mac:`${K.CTRL.toUpperCase()} + ${B.SHIFT.toUpperCase()} + G `}],v=()=>{t("update:modelShow",!1)};return(p,i)=>{const d=I("n-icon"),r=I("n-space"),n=I("n-gradient-text"),f=I("n-table"),u=I("n-modal");return w(),N(u,{show:_.value,"onUpdate:show":i[0]||(i[0]=c=>_.value=c),"mask-closable":!0,onAfterLeave:v},{default:T(()=>[x(f,{class:"model-content",bordered:!1,"single-line":!1},{default:T(()=>[$("thead",null,[$("tr",null,[Po,Yo,$("th",null,[x(r,{justify:"space-between"},{default:T(()=>[Xo,x(d,{size:"20",class:"go-cursor-pointer",onClick:v},{default:T(()=>[x(a(s))]),_:1})]),_:1})])])]),$("tbody",null,[(w(),Y(re,null,ue(l,(c,C)=>$("tr",{key:C},[$("td",null,Q(c.label),1),$("td",null,Q(c.win),1),c.macSource?(w(),Y("td",No,Q(c.mac),1)):(w(),Y("td",Bo,[x(n,{size:22},{default:T(()=>[ve(Q(c.mac.substr(0,1)),1)]),_:2},1024),ve(" + "+Q(c.mac.substr(3)),1)]))])),64))])]),_:1})]),_:1},8,["show"])}}});const Ko=ee(Go,[["__scopeId","data-v-b3c8d1a4"]]),zo=e=>(Me("data-v-6fbf5bbb"),e=e(),Re(),e),Fo={class:"go-edit-shortcut"},Wo=zo(()=>$("span",null,"å¿«æ·é”®",-1)),Vo=j({__name:"index",setup(e){const{DicomOverlayIcon:o}=le.carbon,s=X(!1);return(_,t)=>{const h=I("n-icon"),l=I("n-button"),v=I("n-tooltip");return w(),Y("div",Fo,[x(Ko,{modelShow:s.value,"onUpdate:modelShow":t[0]||(t[0]=p=>s.value=p)},null,8,["modelShow"]),x(v,{trigger:"hover"},{trigger:T(()=>[x(l,{class:"scale-btn",secondary:"",size:"small",onClick:t[1]||(t[1]=p=>s.value=!0)},{default:T(()=>[x(h,{size:"21",depth:3},{default:T(()=>[x(a(o))]),_:1})]),_:1})]),default:T(()=>[Wo]),_:1})])}}});const qo=ee(Vo,[["__scopeId","data-v-6fbf5bbb"]]),jo={class:"go-edit-data-sync go-flex-items-center"},Jo=j({__name:"index",setup(e){he(d=>({"5f2316f3":h.value}));const{ReloadIcon:o}=le.ionicons5,s=te(),_=fe(),{saveStatus:t}=ye(s.getEditCanvas),h=X(_.getAppTheme),l=X(""),v=X("");let p=setTimeout(()=>{});const i={[pe.PENDING]:{text:"ç­‰å¾…è‡ªåŠ¨åŒæ­¥",type:""},[pe.START]:{text:"æ­£åœ¨åŒæ­¥ä¸­",type:"success"},[pe.SUCCESS]:{text:"åŒæ­¥æˆåŠŸï¼",type:"success"},[pe.FAILURE]:{text:"åŒæ­¥å¤±è´¥!",type:"error"}};return ae(()=>t.value,d=>{clearTimeout(p),l.value=i[d].text,v.value=i[d].type,p=setTimeout(()=>{l.value=i[pe.PENDING].text,v.value=i[pe.PENDING].type},3e3)},{immediate:!0}),(d,r)=>{const n=I("n-text"),f=I("n-tooltip"),u=I("n-icon"),c=I("n-spin");return w(),Y("div",jo,[x(f,{trigger:"hover"},{trigger:T(()=>[x(n,{class:"status-desc go-ml-2",type:v.value,depth:"3"},{default:T(()=>[ve(Q(l.value),1)]),_:1},8,["type"])]),default:T(()=>[$("span",null,Q(a(Lt))+"s æ›´æ–°ä¸€æ¬¡",1)]),_:1}),Ee(x(c,{class:"go-ml-2",size:"small"},{icon:T(()=>[x(u,{size:"13"},{default:T(()=>[x(a(o))]),_:1})]),_:1},512),[[be,l.value===i[1].text]])])}}});const Zo=ee(Jo,[["__scopeId","data-v-91fff540"]]),Qo={class:"go-edit-bottom"},es=j({__name:"index",setup(e){he(E=>({"38332f3a":t.value}));const{LockClosedOutlineIcon:o,LockOpenOutlineIcon:s}=le.ionicons5,_=fe(),t=X(_.getAppTheme),h=dt(),l=te(),{lockScale:v,scale:p}=ye(l.getEditCanvas),i=X(null);let d=[{label:"200%",value:200},{label:"150%",value:150},{label:"100%",value:100},{label:"50%",value:50},{label:"è‡ªé€‚åº”",value:0}];const r=X(""),n=E=>{var b;if((b=i.value)==null||b.blur(),E===0){h.setItemUnHandle(pt.RE_POSITION_CANVAS,!0),l.computedScale();return}l.setScale(E/100)},f=()=>{l.setEditCanvas(V.LOCK_SCALE,!v.value)},u=X(100),c=E=>`${E}%`,C=E=>{l.setScale(E/100)},g=Fe({100:""});return kt(()=>{const E=(p.value*100).toFixed(0);r.value=`${E}%`,u.value=parseInt(E)}),(E,b)=>{const k=I("n-text"),O=I("n-divider"),G=I("n-space"),se=I("n-select"),P=I("n-icon"),m=I("n-button"),R=I("n-tooltip"),y=I("n-slider");return w(),Y("div",Qo,[x(G,null,{default:T(()=>[x(a(Ao)),x(k,{id:"keyboard-dress-show",depth:"3"}),x(O,{vertical:""}),x(a(Zo))]),_:1}),x(G,{class:"bottom-ri"},{default:T(()=>[x(a(qo)),x(se,{ref_key:"selectInstRef",ref:i,class:"scale-btn",value:r.value,"onUpdate:value":[b[0]||(b[0]=L=>r.value=L),n],size:"mini",disabled:a(v),options:a(d)},null,8,["value","disabled","options"]),x(R,{trigger:"hover"},{trigger:T(()=>[x(m,{onClick:f,text:""},{default:T(()=>[x(P,{class:ne(["lock-icon",{color:a(v)}]),size:"18",depth:2},{default:T(()=>[a(v)?(w(),N(a(o),{key:0})):(w(),N(a(s),{key:1}))]),_:1},8,["class"])]),_:1})]),default:T(()=>[$("span",null,Q(a(v)?"è§£é”":"é”å®š")+"å½“å‰æ¯”ä¾‹",1)]),_:1}),x(y,{class:"scale-slider",value:u.value,"onUpdate:value":[b[1]||(b[1]=L=>u.value=L),C],"default-value":50,min:10,max:200,step:5,"format-tooltip":c,disabled:a(v),marks:g},null,8,["value","disabled","marks"])]),_:1})])}}});const ts=ee(es,[["__scopeId","data-v-73ae513a"]]),Ce=te(),os=()=>{Ce.setTargetSelectChart(void 0),Dt(It(Ce.getStorageInfo()||[]),void 0,"json");const e=document.querySelector(".go-edit-range"),o=document.getElementById("go-edit-watermark");if(!e||!o){window.$message.error("å¯¼å‡ºå¤±è´¥ï¼");return}const s=Ce.getEditCanvas.scale;Ce.setScale(1,!0),o.style.display="block",setTimeout(()=>{$t(e,()=>{o&&(o.style.display="none"),Ce.setScale(s,!0)})},600)},ss=()=>{const e=X(),{updateComponent:o}=ut();return{importUploadFileListRef:e,importBeforeUpload:({file:t})=>{e.value=[];const h=t.file.type;return h!==st.JSON&&h!==st.TXT?(window.$message.warning("ä»…æ”¯æŒä¸Šä¼  ã€JSONã€‘ æ ¼å¼æ–‡ä»¶ï¼Œè¯·é‡æ–°ä¸Šä¼ ï¼"),!1):!0},importCustomRequest:t=>{const{file:h}=t;Mt(()=>{h.file?Rt(h.file).then(l=>{jt({message:"è¯·é€‰æ‹©å¯¼å…¥æ–¹å¼:",positiveText:"æ–°å¢žï¼ˆå¯æ’¤å›žï¼‰",negativeText:"è¦†ç›–ï¼ˆä¸å¯æ’¤å›žï¼‰",negativeButtonProps:{type:"info",ghost:!1},onPositiveCallback:()=>de(void 0,null,function*(){try{l=Xe(l),yield o(l,!1,!0),window.$message.success("å¯¼å…¥æˆåŠŸï¼")}catch(v){console.log(v),window.$message.error("ç»„ä»¶å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§!")}}),onNegativeCallback:()=>de(void 0,null,function*(){try{l=Xe(l),yield o(l,!0,!0),window.$message.success("å¯¼å…¥æˆåŠŸï¼")}catch(v){console.log(v),window.$message.error("ç»„ä»¶å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§!")}})})}):window.$message.error("å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ•°æ®æˆ–è”ç³»ç®¡ç†å‘˜ï¼")})}}};var ce=(e=>(e.BUTTON="button",e.IMPORTUPLOAD="importUpload",e))(ce||{});const ns={class:"btn-item"},as=j({__name:"index",setup(e){const{DownloadIcon:o,ShareIcon:s,PawIcon:_,SettingsSharpIcon:t,CreateIcon:h}=le.ionicons5,l=lt(),v=te();Ut(),Qt();let p=null;const i=X(!1),d=X(!0),r=X(!0),{importUploadFileListRef:n,importCustomRequest:f,importBeforeUpload:u}=ss(),c=M(()=>l.getChartToolsStatus===et.ASIDE),C=M(()=>l.getChartToolsStatusHide),g=M(()=>d.value&&C.value),E=M(()=>{if(!c.value)return se;const P=[];return se.map(m=>{P.unshift(m)}),P}),b=()=>{p=setTimeout(()=>{d.value&&(d.value=!1,r.value=!0)},200),setTimeout(()=>{r.value=!1},400)},k=()=>{clearTimeout(p),d.value||(d.value=!0)},O=()=>{window.$message.warning("è¯·é€šè¿‡é¡¶éƒ¨ã€åŒæ­¥å†…å®¹ã€‘æŒ‰é’®åŒæ­¥æœ€æ–°æ•°æ®ï¼"),v.setEditCanvas(V.IS_CODE_EDIT,!0),setTimeout(()=>{const P=Ht(At.CHART_EDIT_NAME,"href");if(!P)return;const m=Pt();G(m),Yt(P,[m],void 0,!0)},2e3)},G=P=>{const m=v.getStorageInfo(),R=Xt(we.GO_CHART_STORAGE_LIST)||[];if(R!=null&&R.length){const y=R.findIndex(L=>L.id===P);y!==-1?(R.splice(y,1,ge(A({},m),{id:P})),Ae(we.GO_CHART_STORAGE_LIST,R)):(R.push(ge(A({},m),{id:P})),Ae(we.GO_CHART_STORAGE_LIST,R))}else Ae(we.GO_CHART_STORAGE_LIST,[ge(A({},m),{id:P})])},se=[{key:"import",type:ce.IMPORTUPLOAD,name:"å¯¼å…¥",icon:s},{key:"export",type:ce.BUTTON,name:"å¯¼å‡º",icon:o,handle:os},{key:"edit",type:ce.BUTTON,name:"ç¼–è¾‘",icon:h,handle:O},{key:"setting",type:ce.BUTTON,name:"è®¾ç½®",icon:t,handle:()=>{i.value=!0}}];return(P,m)=>{const R=I("n-icon"),y=I("n-text"),L=I("n-button"),U=I("n-upload"),W=I("n-tooltip");return w(),Y(re,null,[$("div",{class:ne(["go-chart-edit-tools",[a(l).getChartToolsStatus,g.value?"isMini":"unMini"]]),onClick:m[1]||(m[1]=H=>d.value&&(d.value=!1)),onMouseenter:b,onMouseleave:k},[Ee(x(R,{class:"asideLogo",size:"22"},{default:T(()=>[x(a(_))]),_:1},512),[[be,a(l).getChartToolsStatus===a(et).ASIDE&&g.value]]),(w(!0),Y(re,null,ue(E.value,(H,Se)=>(w(),N(W,{key:H.key,disabled:!c.value||C.value&&r.value,trigger:"hover",placement:"left"},{trigger:T(()=>[$("div",ns,[H.type===a(ce).BUTTON?(w(),N(L,{key:0,circle:c.value,secondary:"",onClick:H.handle},{icon:T(()=>[c.value?(w(),N(R,{key:0,size:"22"},{default:T(()=>[(w(),N(_e(H.icon)))]),_:2},1024)):(w(),N(_e(H.icon),{key:1}))]),default:T(()=>[Ee(x(y,{depth:"3"},{default:T(()=>[ve(Q(H.name),1)]),_:2},1536),[[be,!c.value]])]),_:2},1032,["circle","onClick"])):H.type===a(ce).IMPORTUPLOAD?(w(),N(U,{key:1,"file-list":a(n),"onUpdate:fileList":m[0]||(m[0]=F=>Ot(n)?n.value=F:null),"show-file-list":!1,customRequest:a(f),onBeforeUpload:a(u)},{default:T(()=>[x(L,{circle:c.value,secondary:""},{icon:T(()=>[c.value?(w(),N(R,{key:0,size:"22"},{default:T(()=>[(w(),N(_e(H.icon)))]),_:2},1024)):(w(),N(_e(H.icon),{key:1}))]),default:T(()=>[Ee(x(y,{depth:"3"},{default:T(()=>[ve(Q(H.name),1)]),_:2},1536),[[be,!c.value]])]),_:2},1032,["circle"])]),_:2},1032,["file-list","customRequest","onBeforeUpload"])):$e("",!0)])]),default:T(()=>[$("span",null,Q(H.name),1)]),_:2},1032,["disabled"]))),128))],34),x(a(Zt),{modelShow:i.value,"onUpdate:modelShow":m[2]||(m[2]=H=>i.value=H)},null,8,["modelShow"])],64)}}});const rs=ee(as,[["__scopeId","data-v-2a436871"]]),cs=j({__name:"index",setup(e){const o=te(),{handleContextMenu:s}=We(),{dataSyncFetch:_,intervalDataSyncUpdate:t}=ut();Nt(),Bt(Ft,null),eo(()=>de(this,null,function*(){}));const{mouseenterHandle:h,mouseleaveHandle:l,mousedownHandle:v,mouseClickHandle:p}=vt(),i=(f,u,c)=>{if(o.getTargetChart.selectId.length>1)return u.filter(g=>[Z.GROUP,Z.DELETE].includes(g.key));const C=[];return c.status.lock?C.push(Z.LOCK):C.push(Z.UNLOCK),c.status.hide?C.push(Z.HIDE):C.push(Z.SHOW),f.filter(g=>!C.includes(g.key))},d=M(()=>o.getEditCanvasConfig.chartThemeSetting),r=M(()=>rt(o.getEditCanvasConfig.chartCustomThemeColorInfo)[o.getEditCanvasConfig.chartThemeColor]);M(()=>o.getEditCanvasConfig.filterShow);const n=M(()=>{const f=o.getEditCanvasConfig.background,u=o.getEditCanvasConfig.backgroundImage,g=o.getEditCanvasConfig.selectColor?{background:f||void 0}:{background:`url(${u}) no-repeat center center / cover !important`};return ge(A({},g),{width:"inherit",height:"inherit"})});return Ke(()=>{Wt(),_()}),(f,u)=>(w(),N(a(Jt),{id:"go-chart-edit-layout",flex:!0,showTop:!1,showBottom:!0,depth:1,xScroll:!0,disabledScroll:!0,onMousedown:a(_t),onDrop:a(oo),onDragover:a(nt),onDragenter:a(nt)},{aside:T(()=>[x(a(rs))]),bottom:T(()=>[x(a(ts))]),default:T(()=>[x(a(Eo),null,{default:T(()=>[$("div",{id:"go-chart-edit-content",onContextmenu:u[0]||(u[0]=(...c)=>a(s)&&a(s)(...c))},[x(a(To),null,{default:T(()=>[$("div",{style:q(A(A({},a(De)(a(o).getEditCanvasConfig)),n.value))},[(w(!0),Y(re,null,ue(a(o).getComponentList,(c,C)=>(w(),Y("div",{key:c.id},[c.isGroup?(w(),N(a(io),{key:0,groupData:c,groupIndex:C},null,8,["groupData","groupIndex"])):(w(),N(a(Ge),{key:1,"data-id":c.id,index:C,style:q(A(A({},a(Ie)(c.attr,C)),a(ct)(c.styles))),item:c,onClick:g=>a(p)(g,c),onMousedown:g=>a(v)(g,c),onMouseenter:g=>a(h)(g,c),onMouseleave:g=>a(l)(g,c),onContextmenu:g=>a(s)(g,c,i)},{default:T(()=>[(w(),N(_e(c.chartConfig.chartKey),{class:ne(["edit-content-chart",a(Ne)(c.styles.animations)]),chartConfig:c,themeSetting:d.value,themeColor:r.value,style:q(A(A(A({},a(ie)(c.attr)),a(De)(c.styles)),a(Be)(c.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","style","item","onClick","onMousedown","onMouseenter","onMouseleave","onContextmenu"]))]))),128))],4)]),_:1})],32)]),_:1})]),_:1},8,["onMousedown","onDrop","onDragover","onDragenter"]))}});const $s=ee(cs,[["__scopeId","data-v-562bc28e"]]);export{$s as default};
